// Module included in the following assemblies:
//
// * backup_and_restore/application_backup_and_restore/installing/installing-oadp-aws.adoc
// * backup_and_restore/application_backup_and_restore/installing/installing-oadp-azure.adoc
// * backup_and_restore/application_backup_and_restore/installing/installing-oadp-gcp.adoc
// * backup_and_restore/application_backup_and_restore/installing/installing-oadp-mcg.adoc
// * backup_and_restore/application_backup_and_restore/installing/installing-oadp-ocs.adoc

:_content-type: CONCEPT
[id="oadp-about-backup-snapshot-locations_{context}"]
= About backup and snapshot locations and their secrets

You specify backup and snapshot locations and their secrets in the `DataProtectionApplication` custom resource (CR).

[id="backup-locations_{context}"]
[discrete]
== Backup locations

You specify S3-compatible object storage, such as Multicloud Object Gateway, Noobaa, or Minio, as a backup location.

Velero backs up {product-title} resources, Kubernetes objects, and internal images as an archive file on object storage.

[id="snapshot-locations_{context}"]
[discrete]
== Snapshot locations

If you use your cloud provider's native snapshot API to back up persistent volumes, you must specify the cloud provider as the snapshot location.

If you use Container Storage Interface (CSI) snapshots, you do not need to specify a snapshot location because you will create a `VolumeSnapshotClass` CR to register the CSI driver.

If you use Restic, you do not need to specify a snapshot location because Restic backs up the file system on object storage.

[id="create-noobaa-bucket_{context}"]
[discrete]
=== Create a noobaa bucket for backups
OpenShift Data Foundation's (ODF) `noobaa` is an object storage bucket that stores VMs and containers that are backed up and waiting for migration.

To define a `BackupStorageLocation' to save these objects:

. Go to ODF Object Bucket Claim.

[source, terminal]
----
apiVersion:         objectbucket.io/v1alpha1
kind:               ObjectBucketClaim
name:               oadp-backup-bucket
namespace:          openshift-adp
labels:
app:                noobaa
bucket-provisioner: openshift-storage.noobaa.io-obc
noobaa-domain:      openshift-storage.noobaa.io
spec:               additionalConfig: bucketclass: noobaa-default-bucket-class
bucketName: oadp-backup-bucket-a3800b52-5019-47c9-9d2f-9cdcf9574c65
generateBucketName:  oadp-backup-bucketobjectBucketName: obc-openshift-adp-oadp-backup-bucket
storageClassName:    openshift-storage.noobaa.ioh2. OADP - Velero DPA
apiVersion:          oadp.openshift.io/v1alpha1kind: DataProtectionApplication
metadata:
name:                velero-dpanamespace: openshift-adpspec:
backupImages:        false
configuration:       restic:
enable:              true
velero:              defaultP
Plugins:             - openshift - aws - kubevirt - csifeature
Flags:               Enable
CSInoDefaultBackupLocation: true
Backup Storage Location
apiVersion: velero.io/v1
kind: BackupStorageLocation
metadata: name: incluster-bsl
namespace: openshift-adp
spec:
config:
profile: default
region: noobaas3
ForcePathStyle: 'true'
s3Url: 'https://s3.openshift-storage.svc'insecure
SkipTLSVerify: "true"
credential:
key:
cloudname: cloud-credentials
objectStorage:
bucket: oadp-backup-bucket-a3800b52-5019-47c9-9d2f-9cdcf9574c65
prefix: valero
default: true
provider: aws|
----


[id="secrets_{context}"]
[discrete]
== Secrets

If the backup and snapshot locations use the same credentials or if you do not require a snapshot location, you create a default `Secret`.

If the backup and snapshot locations use different credentials, you create two secret objects:

* Custom `Secret` for the backup location, which you specify in the `DataProtectionApplication` CR.
* Default `Secret` for the snapshot location, which is not referenced in the `DataProtectionApplication` CR.

[IMPORTANT]
====
The Data Protection Application requires a default `Secret`. Otherwise, the installation will fail.

If you do not want to specify backup or snapshot locations during the installation, you can create a default `Secret` with an empty `credentials-velero` file.
====

=== Creating a secret

